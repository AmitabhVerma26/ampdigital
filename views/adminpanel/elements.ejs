<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Manage Videos/Quizes/Exercises - AMP Digital</title>

    <!-- Bootstrap core CSS -->
    <link href="/sbadmin/css/bootstrap.css" rel="stylesheet">
    <!-- <link href="/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet"> -->

    <!-- Add custom CSS here -->
    <link href="/sbadmin/css/sb-admin.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.14.30/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <link href="/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/default.css" id="option_color">
    <!-- Page Specific CSS -->
    <style>
      /*.side-nav{
        top: 109px;!important;
      }*/
      .editable-container.popover {
      z-index: 10000;
    }
      .breadcrumb a {
      color: #2972d1!important;
      cursor: pointer!important;
    }
    a{
      cursor: pointer;
    }
    </style>
  </head>

  <body>
    <div id="addNewElementModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
    
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header bg-color-1 border-color-1">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title" style="color: white;">Add New Element</h4>
          </div>
          <div class="modal-body addNewCourse">
            <div>
              <div class="form-group formField">
                <select class="form-control border-color-1" name="" id="contenttype">
                  <option value="">Select Content Type</option>
                  <option value="video">Video</option>
                  <option value="exercise">Exercise</option>
                  <option value="quiz">Quiz</option>
                </select>
              </div>
              <div class="form-group ">
                <textarea placeholder="Element Name" class="form-control border-color-2" rows="5" id="elementname"></textarea>
              </div>
              <div class="form-group ">
                <textarea value=" " placeholder="Element HTML" class="form-control border-color-2 hidden" rows="5" id="elementhtml"></textarea>
              </div>
              <div class="form-group ">
                <input type="text" class="elementurlid quizid form-control border-color-3" placeholder="Add Quiz ID/Video URL">
              </div>
              <div class="form-group ">
                <input class="form-control border-color-4" type="number" id="elementorder" placeholder="Order"><br><br>
              </div>
              <!--<textarea placeholder="Objective" class="form-control" rows="5" id="elementobjective"></textarea>
              <br>
              <div style="width: 50%;" class='input-group date' id='datetimepicker1'>
                <input placeholder="Completion Date" type='text' id="completiondate" class="form-control" />
                <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
              </div>-->
              <input type="hidden" id="newtopiccourseid" value="<%=course[0]['_id']%>">
              <input type="hidden" id="newtopicmoduleid" value="<%=module[0]['_id']%>">
              <input type="hidden" id="newtopicid" value="<%=topic[0]['_id']%>">
              <button class="btn btn-primary btn-lg" id="addnewelement">Add</button>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
    
      </div>
    </div>
  

    <div id="wrapper">

  <!-- Sidebar -->
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/admin">AMP Digital Admin Panel</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav side-nav">
        <li><a href="/admin"><i class="fa fa-dashboard"></i> Dashboard</a></li>
        <li ><a  href="/jobs/manage"><i class="fa fa-table"></i> Manage Jobs</a></li>  
            <li><a  href="manage/buddingarketerapplications"><i class="fa fa-table"></i> Budding marketer applications</a></li>
          <li><a href="/manage-coupons"><i class="fa fa-table"></i> Manage Coupon Codes</a></li>

        
        
        <li class="active"><a  href="/addcourse"><i class="fa fa-table"></i> Manage Courses</a></li>
          <li><a href="/manage/forum"><i class="fa fa-money"></i> Manage Forums</a></li><li><a href="/submissions"><i class="fa fa-money"></i> Manage Submissions</a></li>
          <li><a href="/webinars/manageattendees"><i class="fa fa-users"></i> Manage Webinar Attendees</a></li>

        <li><a href="/blogs/categories/manage"><i class="fa fa-table"></i> Manage Blog Categories</a></li><li><a href="/blogs/manage"><i class="fa fa-table"></i> Manage Blogs</a></li><li><a href="/webinars/manage"><i class="fa fa-table"></i> Manage Webinar</a></li><li><a href="/manage/team"><i class="fa fa-table"></i> Manage Team</a></li>


                    <li ><a href="/manage/bookdownloads"><i class="fa fa-table"></i> Manage Book Downloads</a></li>

<li><a href="payments/couponstats"><i class="fa fa-table"></i> Referral/Promotional Programs</a></li>
<li><a href="/quizes"><i class="fa fa-table"></i> Manage Quizes</a></li>
        <li class=""><a href="/coursereport"><i class="fa fa-bar-chart-o"></i> Course Stats</a></li>
        <!--<li><a href="forms.html"><i class="fa fa-edit"></i> Forms</a></li>
        <li><a href="typography.html"><i class="fa fa-font"></i> Typography</a></li>
        <li><a href="bootstrap-elements.html"><i class="fa fa-desktop"></i> Bootstrap Elements</a></li>
        <li><a href="bootstrap-grid.html"><i class="fa fa-wrench"></i> Bootstrap Grid</a></li>
        <li><a href="blank-page.html"><i class="fa fa-file"></i> Blank Page</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-caret-square-o-down"></i> Dropdown <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="#">Dropdown Item</a></li>
            <li><a href="#">Another Item</a></li>
            <li><a href="#">Third Item</a></li>
            <li><a href="#">Last Item</a></li>
          </ul>
        </li>-->
      </ul>

      <ul class="nav navbar-nav navbar-right navbar-user">
        <!--<li class="dropdown messages-dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-envelope"></i> Messages <span class="badge">7</span> <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li class="dropdown-header">7 New Messages</li>
            <li class="message-preview">
              <a href="#">
                <span class="avatar"><img src="http://placehold.it/50x50"></span>
                <span class="name">John Smith:</span>
                <span class="message">Hey there, I wanted to ask you something...</span>
                <span class="time"><i class="fa fa-clock-o"></i> 4:34 PM</span>
              </a>
            </li>
            <li class="divider"></li>
            <li class="message-preview">
              <a href="#">
                <span class="avatar"><img src="http://placehold.it/50x50"></span>
                <span class="name">John Smith:</span>
                <span class="message">Hey there, I wanted to ask you something...</span>
                <span class="time"><i class="fa fa-clock-o"></i> 4:34 PM</span>
              </a>
            </li>
            <li class="divider"></li>
            <li class="message-preview">
              <a href="#">
                <span class="avatar"><img src="http://placehold.it/50x50"></span>
                <span class="name">John Smith:</span>
                <span class="message">Hey there, I wanted to ask you something...</span>
                <span class="time"><i class="fa fa-clock-o"></i> 4:34 PM</span>
              </a>
            </li>
            <li class="divider"></li>
            <li><a href="#">View Inbox <span class="badge">7</span></a></li>
          </ul>
        </li>
        <li class="dropdown alerts-dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bell"></i> Alerts <span class="badge">3</span> <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="#">Default <span class="label label-default">Default</span></a></li>
            <li><a href="#">Primary <span class="label label-primary">Primary</span></a></li>
            <li><a href="#">Success <span class="label label-success">Success</span></a></li>
            <li><a href="#">Info <span class="label label-info">Info</span></a></li>
            <li><a href="#">Warning <span class="label label-warning">Warning</span></a></li>
            <li><a href="#">Danger <span class="label label-danger">Danger</span></a></li>
            <li class="divider"></li>
            <li><a href="#">View All</a></li>
          </ul>
        </li>-->
        <li class="dropdown user-dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> <%=email%> <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <!--<li><a href="#"><i class="fa fa-user"></i> Profile</a></li>
            <li><a href="#"><i class="fa fa-envelope"></i> Inbox <span class="badge">7</span></a></li>
            <li><a href="#"><i class="fa fa-gear"></i> Settings</a></li>
            <li class="divider"></li>-->
            <li><a href="/logout"><i class="fa fa-power-off"></i> Log Out</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </nav>

  <div id="page-wrapper">
    <div class="row">
      <h1>Manage Elements</h1>
      <div  class="col-lg-12">
        <ol class="breadcrumb">
          <li class="active"><i class="fa fa-dashboard"></i> Dashboard</li>
          <li><a href="/courses/manage"><%=course[0].course_name%></a></li>
          <li><a href="/courses/<%=course[0]['_id']%>/modules/manage"><%=module[0].module_name%></a></li>
          <li><a href="/courses/topics/<%=course[0]['_id']%>/<%=module[0]['_id']%>/manage"><%=topic[0].topic_name%></a></li>
          <li>Manage Videos, Quizes & Exercises</li>
        </ol>
      </div>
    </div>
    <div class="">
      <div class="tab-content">
        <div class="">
          <button class="btn btn-primary btn-sm pull-right" data-toggle="modal" data-target="#addNewElementModal">Add New Element</button>
          <br><br><br>
          <table class="cell-border compact stripe hover row-border">
            <thead>
            <tr>
              <th>Element Type</th>
              <th>Element Name</th>
              <th>Element Quiz ID/Video URL/Exercise HTML</th>
              <th>Element Duration (If Video)</th>
              <th>Element Order</th>
              <th>Element Objective</th>
              <th>Element Created on</th>
              <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <%for(var i = 0; i < elements.length; i++){%>
            <tr>
              <td>
                <a class="updateelement approtitle" id="element_type" data-type="textarea" data-pk="<%= elements[i]['_id'] %>" data-url="/courses/elements/updateinfo" data-title="Enter title"><%= elements[i]['element_type'] %></a>
              </td>
              <td>
                <a class="updateelement approtitle" id="element_name" data-type="textarea" data-pk="<%= elements[i]['_id'] %>" data-url="/courses/elements/updateinfo" data-title="Enter title"><%= elements[i]['element_name'] %></a>
              </td>
              <td>
                <a class="updateelement approtitle" id="element_val" data-type="textarea" data-pk="<%= elements[i]['_id'] %>" data-url="/courses/elements/updateinfo" data-title="Enter title"><%= elements[i]['element_val'] %></a>
              </td>
              <td>
                <a class="updateelement approtitle" id="duration" data-type="textarea" data-pk="<%= elements[i]['_id'] %>" data-url="/courses/elements/updateinfo" data-title="Enter title"><%= elements[i]['duration'] %></a>
              </td>
              <td>
                <a class="updateelement approtitle" id="element_order" data-type="textarea" data-pk="<%= elements[i]['_id'] %>" data-url="/courses/elements/updateinfo" data-title="Enter title"><%= elements[i]['element_order'] %></a>
              </td>
              <td>
                <a class="updateelement approtitle" id="element_objective" data-type="textarea" data-pk="<%= elements[i]['_id'] %>" data-url="/courses/elements/updateinfo" data-title="Enter Objective"><%= elements[i]['element_objective'] %></a>
              </td>
              <td><%=moment(elements[i]['element_createdon']).format( 'MMM-DD-YYYY')%></td>
              <td><a class="removeelement" data-element_id="<%=elements[i]['_id']%>" href=""><i class="fa fa-trash-o"></i>Remove</a></td>
            </tr>
            <%}%>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div><!-- /#wrapper -->

<!-- JavaScript -->
<script src="/sbadmin/js/jquery-1.10.2.js"></script>
<script src="/sbadmin/js/bootstrap.js"></script>

<!-- Page Specific Plugins -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<!--<script src="http://cdn.oesmith.co.uk/morris-0.4.3.min.js"></script>-->
<!--<script src="/sbadmin/js/morris/chart-data-morris.js"></script>-->
<script src="/sbadmin/js/tablesorter/jquery.tablesorter.js"></script>
<script src="/sbadmin/js/tablesorter/tables.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://momentjs.com/downloads/moment-with-locales.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.14.30/js/bootstrap-datetimepicker.min.js"></script>
<!--Confirm.js alerts Plugin-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>
<link href="/xeditable2/be/css/bootstrap-editable.css" rel="stylesheet"/>
<script src="/xeditable2/be/js/bootstrap-editable.js"></script>
<link href="/xeditable2/inputs-ext/wysihtml5/bootstrap-wysihtml5-0.0.2/bootstrap-wysihtml5-0.0.2.css" rel="stylesheet" type="text/css"></link>
<script src="/xeditable2/inputs-ext/wysihtml5/bootstrap-wysihtml5-0.0.2/wysihtml5-0.3.0.js"></script>
<script src="/xeditable2/inputs-ext/wysihtml5/bootstrap-wysihtml5-0.0.2/bootstrap-wysihtml5-0.0.2.js"></script>
<script src="/xeditable2/inputs-ext/wysihtml5/wysihtml5.js"></script>
<!--Confirm.js alerts Plugin-->
<script type="text/javascript">
    $(document).ready(function () {
      $.fn.editableform.buttons =
  '<button type="submit" class="btn btn-primary btn-sm editable-submit">'+
    'Submit'+
  '</button>'+
  '<button type="button" class="btn btn-default btn-sm editable-cancel">'+
    'Cancel'+
  '</button>';
        $('#datetimepicker1').datetimepicker();

        //Handler to add a new element
        $('#addnewelement').on('click', function () {
            var element_type = $('#contenttype').val();
            if($('#contenttype').val()=="exercise"){
              var element_val = $('#elementhtml').val();
            }
            else{
              var element_val = $('.elementurlid').val();
            }
            var element_order = $('#elementorder').val();
            var element_completiondate = $('#completiondate').val();
            var element_objective = $('#elementobjective').val();
            var element_name = $('#elementname').val();
            var element_course_id = $('#newtopiccourseid').val();
            var element_module_id = $('#newtopicmoduleid').val();
            var element_taskid = $('#newtopicid').val();
            var elementObj = {
                element_type: element_type,
                element_val: element_val,
                element_order: element_order,
                element_completiondate: element_completiondate,
                element_objective: element_objective,
                element_name: element_name,
                element_course_id: element_course_id,
                element_module_id: element_module_id,
                element_taskid: element_taskid
            };
            console.log(elementObj);
            if(element_type.trim()!=='' && element_order!=='' && element_completiondate!=='' && element_objective!==''){
                $.ajax({
                    type: "POST",
                    url: '/courses/elements',
                    data: {
                        element_type: element_type,
                        element_val: element_val,
                        element_order: element_order,
                        element_completiondate: element_completiondate,
                        element_objective: element_objective,
                        element_name: element_name,
                        element_course_id: element_course_id,
                        element_module_id: element_module_id,
                        element_taskid: element_taskid
                    },
                    success: function(result){
                        location.reload();
                    }
                });
            }
            else{
                alert('Kindly fill all inputs');
            }
        });

        $('.removeelement').on('click', function (e) {
            e.preventDefault();
            var element_id = $(this).data('element_id');
            $.confirm({
                title: 'Confirm!',
                content: 'Are you sure you want to delete the element?',
                buttons: {
                    confirm: function () {
                        $.ajax({
                            type: "DELETE",
                            url: '/courses/elements/removeelement',
                            data: {
                                element_id: element_id
                            },
                            success: function(result){
                                $.alert('Element Removed Successfully!');
                                location.reload();
                            }
                        });
                    },
                    cancel: function () {

                    },
                }
            });
        });

        $('#contenttype').on('change', function () {
            if($(this).val()=='video'){
                $('.elementurlid').val('http://player.vimeo.com/video/');
            }
            if($(this).val()=='exercise'){
              // $('#elementhtml').removeClass('hidden');
              $('.elementurlid').addClass('hidden');
            }
            else{
              $('#elementhtml').addClass('hidden');
              $('.elementurlid').removeClass('hidden');
            }
        })

        $('table').DataTable({"order": [[ 2, "asc" ]],
            "paging": false,
            "initComplete": function(settings, json) {
                $('.updateelement').editable({tpl: '<textarea maxlength="10000"></textarea>', success: function(response, newValue) {

                    }});
            }});
    });
</script>
</body>
</html>
