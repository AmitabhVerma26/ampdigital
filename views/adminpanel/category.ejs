<!DOCTYPE html>
<html lang="en">
  <head> <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Manage Blog Categories - AMP Digital</title>

    <!-- Bootstrap core CSS -->
    <link href="/sbadmin/css/bootstrap.css" rel="stylesheet"> <link rel="shortcut icon" href="/logo-ampdigitalnet.png">
    <link href="plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">

    <!-- Add custom CSS here -->
    <link href="/sbadmin/css/sb-admin.css" rel="stylesheet">
    <link rel="stylesheet" href="/sbadmin/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.14.30/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <link href="/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/default.css" id="option_color">
    <!-- Page Specific CSS -->
    <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.4.3.min.css">
    <style>
      /*.side-nav{
        top: 109px;!important;
      }*/
    </style>
  </head>

  <body>
  <!-- Modal -->
  <div id="addNewCourseModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header bg-color-1">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 style="color: white;" class="modal-title">Add New Blog Category</h4>
        </div>
        <div class="modal-body addNewCourse">
          <div class="homeContactContent">
            <div class="row">
              <div class="col-sm-6 col-xs-12">
                <div class="form-group">
                  <input type="text" class="form-control border-color-1" id="category_name" placeholder="Category Name">
                </div>
              </div>
              <div class="col-xs-12">
                <div class="formBtnArea">
                  <button id="addnewcategory" class="btn btn-primary">Add Blog Category</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
  
    </div>
  </div>

    <div id="wrapper">

      <!-- Sidebar -->
      <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/admin">AMP Digital Admin Panel</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav side-nav">
            <li><a href="/admin"><i class="fa fa-dashboard"></i> Dashboard</a></li>
            <li ><a  href="/jobs/manage"><i class="fa fa-table"></i> Manage Jobs</a></li>
                        <li><a href="/courses/coupons/manage"><i class="fa fa-table"></i> Manage Coupon Codes</a></li>

            
            
            <li><a  href="/courses/manage"><i class="fa fa-table"></i> Manage Courses</a></li>          <li><a href="/submissions"><i class="fa fa-money"></i> Manage Submissions</a></li>
          <li><a href="/webinars/attendees/manage"><i class="fa fa-users"></i> Manage Webinar Attendees</a></li>
          <li class="active"><a href="/blogs/categories/manage"><i class="fa fa-table"></i> Manage Blog Categories</a></li>
            <li><a href="/blogs/manage"><i class="fa fa-table"></i> Manage Blogs</a></li><li><a href="/webinars/manage"><i class="fa fa-table"></i> Manage Webinar</a></li><li><a href="/manage/team"><i class="fa fa-table"></i> Manage Team</a></li>
           

                        <li ><a href="/manage/bookdownloads"><i class="fa fa-table"></i> Manage Book Downloads</a></li>

<li><a href="/payments/couponstats"><i class="fa fa-table"></i> Referral/Promotional Programs</a></li>
<li><a href="/courses/quizes/manage"><i class="fa fa-table"></i> Manage Quizes</a></li>
            <li class=""><a href="/courses/report/manage"><i class="fa fa-bar-chart-o"></i> Course Stats</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right navbar-user">
            <li class="dropdown user-dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> <%=email%> <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/logout"><i class="fa fa-power-off"></i> Log Out</a></li>
              </ul>
            </li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </nav>

      <div id="page-wrapper">
    <div class="row">
      <div  class="col-lg-12">
        <ol class="breadcrumb">
          <li class="active"><i class="fa fa-dashboard"></i> Dashboard</li>
          <li class="active"><i class="fa fa-users"></i> Blog Categories</li>
        </ol>
      </div>
    </div>
    <div class="">

      <div class="tab-content">
        <div id="home" class="tab-pane fade in active">
          <div class="row">
            <button class="btn btn-primary btn-sm pull-right" data-toggle="modal" data-target="#addNewCourseModal">Add New Blog Category</button>
            <br><br>
            <table class="cell-border compact stripe hover row-border">
              <thead>
              <tr>
                <th>Created On</th>
                <th>Name</th>
                <th>Action</th>
              </tr>
              </thead>
              <tbody>
              <%for(var i = 0; i < docs.length; i++){%>
              <tr>
                <td>
                  <%=moment(docs[i]["date"]).format("DD/MMM/YYYY HH:mm A")%>
                </td>
                <td>
                  <a class="updatetestimonialname" id="updatetestimonialname" data-type="textarea" data-pk="<%= docs[i]['_id'] %>" data-url="/blogs/categories/updatecategoryinfo" data-title="Enter name"><%= docs[i]['name'] %></a>
                </td>
                <td><a class="removecategory" data-categoryid="<%=docs[i]['_id']%>" href=""><i class="fa fa-trash-o"></i>Remove</a></td>
              </tr>
              <%}%>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div><!-- /#wrapper -->

<!-- JavaScript -->
<script src="/sbadmin/js/jquery-1.10.2.js"></script>
<script src="/sbadmin/js/bootstrap.js"></script>

<!-- Page Specific Plugins -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<!--<script src="http://cdn.oesmith.co.uk/morris-0.4.3.min.js"></script>-->
<!--<script src="/sbadmin/js/morris/chart-data-morris.js"></script>-->
<script src="/sbadmin/js/tablesorter/jquery.tablesorter.js"></script>
<script src="/sbadmin/js/tablesorter/tables.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://momentjs.com/downloads/moment-with-locales.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.14.30/js/bootstrap-datetimepicker.min.js"></script>
<!--Confirm.js alerts Plugin-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>
<link href="/css/bootstrap-editable.css" rel="stylesheet"/>
<script src="/js/bootstrap-editable.min.js"></script>
<!--Confirm.js alerts Plugin-->
<script type="text/javascript">
    $(document).ready(function () {
      $.fn.editableform.buttons =
  '<button type="submit" class="btn btn-primary btn-sm editable-submit">'+
    '<i class="fa fa-fw fa-check"></i>'+
  '</button>'+
  '<button type="button" class="btn btn-default btn-sm editable-cancel">'+
    '<i class="fa fa-fw fa-times"></i>'+
  '</button>';
        $('table').DataTable({
            "paging": false,
            "initComplete": function(settings, json) {
              $('.updatetestimonialcontent, .updatetestimonialname, .updatetestimonialdesignation').editable({
    });
              $('.updatecoursestartdate').editable({
        format: 'yyyy-mm-dd',    
        viewformat: 'dd/mm/yyyy',
        container: 'body',    
        datepicker: {
                weekStart: 1
           }
        });
              $('.updatecoursemode').editable({
                value: '',    
                source: [
                {value: '', text: '--Select--'},
                      {value: 'Live', text: 'Live'},
                      {value: 'Video', text: 'Video'}
                  ]
            });

            $('.updatecourselive').editable({
                value: 'Not Live',    
                source: [
                      {value: 'Live', text: 'Live'},
                      {value: 'Not Live', text: 'Not Live'}
                  ]
            });
                $('.updatecoursename').editable({tpl: '<textarea maxlength="10000"></textarea>', success: function(response, newValue) {
                    }});
            }
        });

        //Handler to add a new course
        $('#addnewcategory').on('click', function () {
            var name = $('#category_name').val();
            var categoryurl = $('#category_url').val();
            $.ajax({
                type: "POST",
                url: '/blogs/addcategory',
                data: {
                    name: name,
                    date: new Date(),
                    deleted: false
                },
                success: function(result){
                    $.alert('Category Added Successfully!');
                    location.reload();
                }
            });
        });

        $('.removecategory').on('click', function (e) {
            e.preventDefault();
            var categoryid = $(this).data('categoryid');
            $.confirm({
                title: 'Confirm!',
                content: 'Are you sure you want to delete the category?',
                buttons: {
                    confirm: function () {
                        $.ajax({
                            type: "DELETE",
                            url: '/blogs/removecategory',
                            data: {
                              categoryid: categoryid
                            },
                            success: function(result){
                                $.alert('Category Removed Successfully!');
                                location.reload();
                            }
                        });
                    },
                    cancel: function () {

                    },
                }
            });
        });
    });
</script>
</body>
</html>
